From e5514c4beaa55c7a17a4404f48ae9b9d8b6f504e Mon Sep 17 00:00:00 2001
From: Samuel Cheng <samuelogre@gmail.com>
Date: Wed, 17 Dec 2025 14:29:30 +0800
Subject: [PATCH 2/2] modify dts for ecu1270

---
 dts/upstream/src/arm64/ti/k3-j722s-evm.dts | 948 +++------------------
 1 file changed, 104 insertions(+), 844 deletions(-)

diff --git a/dts/upstream/src/arm64/ti/k3-j722s-evm.dts b/dts/upstream/src/arm64/ti/k3-j722s-evm.dts
index 7466eafea0c..1fe93ab972b 100644
--- a/dts/upstream/src/arm64/ti/k3-j722s-evm.dts
+++ b/dts/upstream/src/arm64/ti/k3-j722s-evm.dts
@@ -22,8 +22,15 @@
 		serial0 = &wkup_uart0;
 		serial2 = &main_uart0;
 		serial3 = &main_uart5;
+		i2c0 = &main_i2c0;
+		i2c1 = &wkup_i2c0;
+		i2c3 = &main_i2c3;
 		mmc0 = &sdhci0;
 		mmc1 = &sdhci1;
+		usb0 = &usb0;
+		usb1 = &usb1;
+		gpio0 = &main_gpio0;
+		gpio1 = &main_gpio1;
 	};
 
 	chosen {
@@ -31,9 +38,9 @@
 	};
 
 	memory@80000000 {
-		/* 8G RAM */
+		// 4G RAM
 		reg = <0x00000000 0x80000000 0x00000000 0x80000000>,
-		      <0x00000008 0x80000000 0x00000001 0x80000000>;
+		      <0x00000008 0x80000000 0x00000000 0x80000000>;
 		device_type = "memory";
 		bootph-pre-ram;
 	};
@@ -122,7 +129,7 @@
 		};
 
 		rtos_ipc_memory_region: ipc-memories@a5000000 {
-			reg = <0x00 0xa5000000 0x00 0x1c00000>;
+			reg = <0x00 0xa5000000 0x00 0x00800000>; // 2G
 			alignment = <0x1000>;
 			no-map;
 		};
@@ -157,8 +164,6 @@
 		regulator-min-microvolt = <3300000>;
 		regulator-max-microvolt = <3300000>;
 		regulator-boot-on;
-		enable-active-high;
-		gpio = <&exp1 15 GPIO_ACTIVE_HIGH>;
 		bootph-all;
 	};
 
@@ -171,20 +176,11 @@
 		regulator-max-microvolt = <3300000>;
 		regulator-boot-on;
 		vin-supply = <&vsys_5v0>;
-		gpios = <&main_gpio0 70 GPIO_ACTIVE_HIGH>;
+		gpios = <&main_gpio1 49 GPIO_ACTIVE_HIGH>;
 		states = <1800000 0x0>,
 			 <3300000 0x1>;
 	};
 
-	vsys_io_3v3: regulator-vsys-io-3v3 {
-		compatible = "regulator-fixed";
-		regulator-name = "vsys_io_3v3";
-		regulator-min-microvolt = <3300000>;
-		regulator-max-microvolt = <3300000>;
-		regulator-always-on;
-		regulator-boot-on;
-	};
-
 	vsys_io_1v8: regulator-vsys-io-1v8 {
 		compatible = "regulator-fixed";
 		regulator-name = "vsys_io_1v8";
@@ -202,109 +198,10 @@
 		regulator-always-on;
 		regulator-boot-on;
 	};
-
-	codec_audio: sound {
-		compatible = "simple-audio-card";
-		simple-audio-card,name = "J722S-EVM";
-		simple-audio-card,widgets =
-			"Headphone",	"Headphone Jack",
-			"Line",		"Line In",
-			"Microphone",	"Microphone Jack";
-		simple-audio-card,routing =
-			"Headphone Jack",	"HPLOUT",
-			"Headphone Jack",	"HPROUT",
-			"LINE1L",		"Line In",
-			"LINE1R",		"Line In",
-			"MIC3R",		"Microphone Jack",
-			"Microphone Jack",	"Mic Bias";
-		simple-audio-card,format = "dsp_b";
-		simple-audio-card,bitclock-master = <&sound_master>;
-		simple-audio-card,frame-master = <&sound_master>;
-		simple-audio-card,bitclock-inversion;
-
-		simple-audio-card,cpu {
-			sound-dai = <&mcasp1>;
-		};
-
-		sound_master: simple-audio-card,codec {
-			sound-dai = <&tlv320aic3106>;
-			clocks = <&audio_refclk1>;
-		};
-	};
-
-	transceiver0: can-phy0 {
-		compatible = "ti,tcan1042";
-		#phy-cells = <0>;
-		max-bitrate = <5000000>;
-		pinctrl-names = "default";
-		pinctrl-0 = <&mcu_mcan0_gpio_pins_default>;
-		standby-gpios = <&mcu_gpio0 12 GPIO_ACTIVE_HIGH>;
-	};
-
-	transceiver1: can-phy1 {
-		compatible = "ti,tcan1042";
-		#phy-cells = <0>;
-		max-bitrate = <5000000>;
-	};
-
-	transceiver2: can-phy2 {
-		compatible = "ti,tcan1042";
-		#phy-cells = <0>;
-		max-bitrate = <5000000>;
-		standby-gpios = <&exp1 17 GPIO_ACTIVE_HIGH>;
-	};
-
-	hdmi0: connector-hdmi {
-		compatible = "hdmi-connector";
-		label = "hdmi";
-		type = "a";
-		port {
-			hdmi_connector_in: endpoint {
-				remote-endpoint = <&sii9022_out>;
-			};
-		};
-	};
-
-	edp0_refclk: clock-edp0-refclk {
-		#clock-cells = <0>;
-		compatible = "fixed-clock";
-		clock-frequency = <19200000>;
-	};
-
-	dp0_pwr_3v3: regulator-dp0-prw {
-		compatible = "regulator-fixed";
-		regulator-name = "dp0-pwr";
-		regulator-min-microvolt = <3300000>;
-		regulator-max-microvolt = <3300000>;
-		gpio = <&exp2 2 GPIO_ACTIVE_HIGH>; /* P2 - DP0_PWR_SW_EN */
-		enable-active-high;
-		regulator-always-on;
-	};
-
-	dp0: connector-dp0 {
-		compatible = "dp-connector";
-		label = "DP0";
-		type = "full-size";
-		dp-pwr-supply = <&dp0_pwr_3v3>;
-
-		port {
-			dp0_connector_in: endpoint {
-				remote-endpoint = <&dp0_out>;
-			};
-		};
-	};
 };
 
 &main_pmx0 {
 
-	/delete-property/ interrupts;
-	main_mcan0_pins_default: main-mcan0-default-pins {
-		pinctrl-single,pins = <
-			J722S_IOPAD(0x1dc, PIN_INPUT, 0) /* (C22) MCAN0_RX */
-			J722S_IOPAD(0x1d8, PIN_OUTPUT, 0) /*(D22) MCAN0_TX */
-		>;
-	};
-
 	main_i2c0_pins_default: main-i2c0-default-pins {
 		pinctrl-single,pins = <
 			J722S_IOPAD(0x01e0, PIN_INPUT_PULLUP, 0) /* (D23) I2C0_SCL */
@@ -313,39 +210,25 @@
 		bootph-all;
 	};
 
-	main_i2c1_pins_default: main-i2c1-default-pins {
+	main_i2c3_pins_default: main-i2c3-default-pins {
 		pinctrl-single,pins = <
-			J722S_IOPAD(0x01e8, PIN_INPUT_PULLUP, 0) /* (C24) I2C1_SCL */
-			J722S_IOPAD(0x01ec, PIN_INPUT_PULLUP, 0) /* (A22) I2C1_SDA */
+			J722S_IOPAD(0x0118, PIN_INPUT_PULLUP, 6) /* (H26) MMC2_CLK.I2C3_SCL */
+			J722S_IOPAD(0x0120, PIN_INPUT_PULLUP, 6) /* (F27) MMC2_CMD.I2C3_SDA */
 		>;
 		bootph-all;
 	};
 
-	main_i2c2_pins_default: main-i2c2-default-pins {
-		pinctrl-single,pins = <
-			J722S_IOPAD(0x00b0, PIN_INPUT_PULLUP, 1) /* (P22) GPMC0_CSn2.I2C2_SCL */
-			J722S_IOPAD(0x00b4, PIN_INPUT_PULLUP, 1) /* (P23) GPMC0_CSn3.I2C2_SDA */
-		>;
-	};
-
 	main_uart0_pins_default: main-uart0-default-pins {
 		pinctrl-single,pins = <
-			J722S_IOPAD(0x01c8, PIN_INPUT, 0)	/* (A22) UART0_RXD */
-			J722S_IOPAD(0x01cc, PIN_OUTPUT, 0)	/* (B22) UART0_TXD */
+			J722S_IOPAD(0x01c8, PIN_INPUT, 0)	/* (F19) UART0_RXD */
+			J722S_IOPAD(0x01cc, PIN_OUTPUT, 0)	/* (F20) UART0_TXD */
 		>;
 		bootph-all;
 	};
 
-	main_uart5_pins_default: main-uart5-default-pins {
-		pinctrl-single,pins = <
-			J722S_IOPAD(0x0108, PIN_INPUT, 3)       /* (J27) UART5_RXD */
-			J722S_IOPAD(0x010c, PIN_OUTPUT, 3)      /* (H27) UART5_TXD */
-		>;
-	};
-
 	vdd_sd_dv_pins_default: vdd-sd-dv-default-pins {
 		pinctrl-single,pins = <
-			J722S_IOPAD(0x0120, PIN_INPUT, 7) /* (F27) MMC2_CMD.GPIO0_70 */
+			J722S_IOPAD(0x0244, PIN_OUTPUT, 7) /* (A24) MMC1_SDWP.GPIO1_49 */
 		>;
 		bootph-all;
 	};
@@ -363,27 +246,17 @@
 		bootph-all;
 	};
 
-	mdio_pins_default: mdio-default-pins {
+	main_usb1_pins_default: main-usb1-default-pins {
 		pinctrl-single,pins = <
-			J722S_IOPAD(0x0160, PIN_OUTPUT, 0) /* (AC24) MDIO0_MDC */
-			J722S_IOPAD(0x015c, PIN_INPUT, 0) /* (AD25) MDIO0_MDIO */
+			J722S_IOPAD(0x0258, PIN_INPUT, 0) /* (B27) USB1_DRVVBUS */
 		>;
 		bootph-all;
 	};
 
-	ospi0_pins_default: ospi0-default-pins {
+	mdio_pins_default: mdio-default-pins {
 		pinctrl-single,pins = <
-			J722S_IOPAD(0x0000, PIN_OUTPUT, 0) /* (L24) OSPI0_CLK */
-			J722S_IOPAD(0x002c, PIN_OUTPUT, 0) /* (K26) OSPI0_CSn0 */
-			J722S_IOPAD(0x000c, PIN_INPUT, 0) /* (K27) OSPI0_D0 */
-			J722S_IOPAD(0x0010, PIN_INPUT, 0) /* (L27) OSPI0_D1 */
-			J722S_IOPAD(0x0014, PIN_INPUT, 0) /* (L26) OSPI0_D2 */
-			J722S_IOPAD(0x0018, PIN_INPUT, 0) /* (L25) OSPI0_D3 */
-			J722S_IOPAD(0x001c, PIN_INPUT, 0) /* (L21) OSPI0_D4 */
-			J722S_IOPAD(0x0020, PIN_INPUT, 0) /* (M26) OSPI0_D5 */
-			J722S_IOPAD(0x0024, PIN_INPUT, 0) /* (N27) OSPI0_D6 */
-			J722S_IOPAD(0x0028, PIN_INPUT, 0) /* (M27) OSPI0_D7 */
-			J722S_IOPAD(0x0008, PIN_INPUT, 0) /* (L22) OSPI0_DQS */
+			J722S_IOPAD(0x0160, PIN_OUTPUT, 0) /* (AC24) MDIO0_MDC */
+			J722S_IOPAD(0x015c, PIN_INPUT, 0) /* (AD25) MDIO0_MDIO */
 		>;
 		bootph-all;
 	};
@@ -406,107 +279,76 @@
 		bootph-all;
 	};
 
-	main_usb1_pins_default: main-usb1-default-pins {
+	main_gpio0_pins_default: main-gpio0-default-pins {
 		pinctrl-single,pins = <
-			J722S_IOPAD(0x0258, PIN_INPUT, 0) /* (B27) USB1_DRVVBUS */
-		>;
-	};
+			J722S_IOPAD(0x007c, PIN_OUTPUT_PULLUP, 7) /* (T23) GPMC0_CLK.GPIO0_31 GPIO6 DO2 */
+			J722S_IOPAD(0x0094, PIN_OUTPUT_PULLUP, 7) /* (P26) GPMC0_BE1n.GPIO0_36 GPIO7 DO3 */
 
-	main_mcasp1_pins_default: main-mcasp1-default-pins {
-		pinctrl-single,pins = <
-			J722S_IOPAD(0x0090, PIN_INPUT, 2) /* (P27) GPMC0_BE0n_CLE.MCASP1_ACLKX */
-			J722S_IOPAD(0x0098, PIN_INPUT, 2) /* (V21) GPMC0_WAIT0.MCASP1_AFSX */
-			J722S_IOPAD(0x008c, PIN_OUTPUT, 2) /* (N23) GPMC0_WEn.MCASP1_AXR0 */
-			J722S_IOPAD(0x0084, PIN_INPUT, 2) /* (N21) GPMC0_ADVn_ALE.MCASP1_AXR2 */
-		>;
-	};
+			// RECOVERY KEY
+			J722S_IOPAD(0x000c, PIN_INPUT, 7) /* (K27) OSPI0_D0.GPIO0_3 GPIO_RESETn */
 
-	audio_ext_refclk1_pins_default: audio-ext-refclk1-default-pins {
-		pinctrl-single,pins = <
-			J722S_IOPAD(0x00a0, PIN_OUTPUT, 1) /* (N24) GPMC0_WPn.AUDIO_EXT_REFCLK1 */
-		>;
-	};
+			// BOARD ID
+			J722S_IOPAD(0x00b8, PIN_INPUT, 7) /* (W27) VOUT0_DATA0.GPIO0_45 BID0 */
+			J722S_IOPAD(0x00bc, PIN_INPUT, 7) /* (W25) VOUT0_DATA1.GPIO0_46 BID1 */	
 
-	pmic_irq_pins_default: pmic-irq-default-pins {
-		pinctrl-single,pins = <
-			J722S_IOPAD(0x030, PIN_INPUT, 7) /* (K23) GPIO0_12 */
-		>;
-	};
+			J722S_IOPAD(0x00cc, PIN_INPUT, 7) /* (W21) VOUT0_DATA5.GPIO0_50 BID2 */
+			J722S_IOPAD(0x00d0, PIN_INPUT, 7) /* (Y26) VOUT0_DATA6.GPIO0_51 BID3 */
 
-	main_gpio0_ioexp_intr_pins_default: main-gpio0-ioexp-intr-default-pins {
-		pinctrl-single,pins = <
-			J722S_IOPAD(0x0110, PIN_INPUT, 7) /* (G27) MMC2_DAT1.GPIO0_67 */
-		>;
-	};
+			// POWER ENABLE
+			J722S_IOPAD(0x0010, PIN_OUTPUT_PULLUP, 7) /* (L27) OSPI0_D1.GPIO0_4 COM_PWR_EN */
+			J722S_IOPAD(0x00d4, PIN_OUTPUT_PULLUP, 7) /* (Y27) VOUT0_DATA7.GPIO0_52 PWR_EN1 */
+			J722S_IOPAD(0x00c4, PIN_OUTPUT_PULLUP, 7) /* (W23) VOUT0_DATA3.GPIO0_48 PWR_EN2 */			
 
-	main_dpi_pins_default: main-dpi-default-pins {
-		pinctrl-single,pins = <
-			J722S_IOPAD(0x0100, PIN_OUTPUT, 0) /* (AB23) VOUT0_VSYNC */
-			J722S_IOPAD(0x00f8, PIN_OUTPUT, 0) /* (AB24) VOUT0_HSYNC */
-			J722S_IOPAD(0x0104, PIN_OUTPUT, 0) /* (AC26) VOUT0_PCLK */
-			J722S_IOPAD(0x00fc, PIN_OUTPUT, 0) /* (AC27) VOUT0_DE */
-			J722S_IOPAD(0x00b8, PIN_OUTPUT, 0) /* (W27) VOUT0_DATA0 */
-			J722S_IOPAD(0x00bc, PIN_OUTPUT, 0) /* (W25) VOUT0_DATA1 */
-			J722S_IOPAD(0x00c0, PIN_OUTPUT, 0) /* (W24) VOUT0_DATA2 */
-			J722S_IOPAD(0x00c4, PIN_OUTPUT, 0) /* (W23) VOUT0_DATA3 */
-			J722S_IOPAD(0x00c8, PIN_OUTPUT, 0) /* (W22) VOUT0_DATA4 */
-			J722S_IOPAD(0x00cc, PIN_OUTPUT, 0) /* (W21) VOUT0_DATA5 */
-			J722S_IOPAD(0x00d0, PIN_OUTPUT, 0) /* (Y26) VOUT0_DATA6 */
-			J722S_IOPAD(0x00d4, PIN_OUTPUT, 0) /* (Y27) VOUT0_DATA7 */
-			J722S_IOPAD(0x00d8, PIN_OUTPUT, 0) /* (AA24) VOUT0_DATA8 */
-			J722S_IOPAD(0x00dc, PIN_OUTPUT, 0) /* (AA27) VOUT0_DATA9 */
-			J722S_IOPAD(0x00e0, PIN_OUTPUT, 0) /* (AA25) VOUT0_DATA10 */
-			J722S_IOPAD(0x00e4, PIN_OUTPUT, 0) /* (AB25) VOUT0_DATA11 */
-			J722S_IOPAD(0x00e8, PIN_OUTPUT, 0) /* (AA23) VOUT0_DATA12 */
-			J722S_IOPAD(0x00ec, PIN_OUTPUT, 0) /* (AA22) VOUT0_DATA13 */
-			J722S_IOPAD(0x00f0, PIN_OUTPUT, 0) /* (AB26) VOUT0_DATA14 */
-			J722S_IOPAD(0x00f4, PIN_OUTPUT, 0) /* (AB27) VOUT0_DATA15 */
-			J722S_IOPAD(0x005c, PIN_OUTPUT, 1) /* (U27) GPMC0_AD8.VOUT0_DATA16 */
-			J722S_IOPAD(0x0060, PIN_OUTPUT, 1) /* (U26) GPMC0_AD9.VOUT0_DATA17 */
-			J722S_IOPAD(0x0064, PIN_OUTPUT, 1) /* (V27) GPMC0_AD10.VOUT0_DATA18 */
-			J722S_IOPAD(0x0068, PIN_OUTPUT, 1) /* (V25) GPMC0_AD11.VOUT0_DATA19 */
-			J722S_IOPAD(0x006c, PIN_OUTPUT, 1) /* (V26) GPMC0_AD12.VOUT0_DATA20 */
-			J722S_IOPAD(0x0070, PIN_OUTPUT, 1) /* (V24) GPMC0_AD13.VOUT0_DATA21 */
-			J722S_IOPAD(0x0074, PIN_OUTPUT, 1) /* (V22) GPMC0_AD14.VOUT0_DATA22 */
-			J722S_IOPAD(0x0078, PIN_OUTPUT, 1) /* (V23) GPMC0_AD15.VOUT0_DATA23 */
-			J722S_IOPAD(0x009c, PIN_OUTPUT, 1) /* (W26) GPMC0_WAIT1.VOUT0_EXTPCLKIN */
+			// Reset_M.2
+			J722S_IOPAD(0x002c, PIN_INPUT, 7) /* (K26) OSPI0_CSn0.GPIO0_11 */
+
+			// PCIE_RSTN1
+			J722S_IOPAD(0x0028, PIN_INPUT, 7) /* (M27) OSPI0_D7.GPIO0_10 */
+
+			// DO
+			J722S_IOPAD(0x009c, PIN_OUTPUT_PULLDOWN, 7) /* (W26) GPMC0_WAIT1.GPIO0_38 DO0 */
+			J722S_IOPAD(0x0024, PIN_OUTPUT_PULLDOWN, 7) /* (N27) OSPI0_D6.GPIO0_9 DO1 */
+			J722S_IOPAD(0x007c, PIN_OUTPUT_PULLDOWN, 7) /* (T23) GPMC0_CLK.GPIO0_31 GPIO6 DO2 */
+			J722S_IOPAD(0x0094, PIN_OUTPUT_PULLDOWN, 7) /* (P26) GPMC0_BE1n.GPIO0_36 GPIO7 DO3 */
 		>;
+		bootph-all;
 	};
-};
 
-&cpsw3g {
-	status = "okay";
-	pinctrl-names = "default";
-	pinctrl-0 = <&rgmii1_pins_default>;
+	main_gpio1_pins_default: main-gpio1-default-pins {
+		pinctrl-single,pins = <
+			// RS232/485
+			J722S_IOPAD(0x01f0, PIN_INPUT_PULLDOWN, 7) /* (A23) EXT_REFCLK1.GPIO1_30 COM1_SEL H-232 L-485 */
+			J722S_IOPAD(0x01b0, PIN_INPUT_PULLDOWN, 7) /* (F24) MCASP0_ACLKR.GPIO1_14 COM2_SEL H-232 L-485 */
 
-	cpts@3d000 {
-		/* MAP HW3_TS_PUSH to GENF1 */
-		ti,pps = <2 1>;
-	};
-};
+			// BOARD ID
+			J722S_IOPAD(0x01a0, PIN_INPUT, 7) /* (F23) MCASP0_AXR0.GPIO1_10 */
+			J722S_IOPAD(0x019c, PIN_INPUT, 7) /* (B25) MCASP0_AXR1.GPIO1_9 */
 
-&cpsw3g_mdio {
-	status = "okay";
-	pinctrl-names = "default";
-	pinctrl-0 = <&mdio_pins_default>;
+			// PWREN_M2
+			J722S_IOPAD(0x0194, PIN_INPUT, 7) /* (A25) MCASP0_AXR3.GPIO1_7 */
 
-	cpsw3g_phy0: ethernet-phy@0 {
-		reg = <0>;
+			// MPCIE3V3_EN
+			J722S_IOPAD(0x01a8, PIN_INPUT, 7) /* (C26) MCASP0_AFSX.GPIO1_12 */
+		>;
 		bootph-all;
-		ti,rx-internal-delay = <DP83867_RGMIIDCTL_2_00_NS>;
-		ti,fifo-depth = <DP83867_PHYCR_FIFO_DEPTH_4_B_NIB>;
-		ti,min-output-impedance;
 	};
 };
 
-&cpsw_port1 {
-	phy-mode = "rgmii-rxid";
-	phy-handle = <&cpsw3g_phy0>;
+&main_gpio0 {
 	status = "okay";
+	pinctrl-names = "default";
+	pinctrl-0 = <&main_gpio0_pins_default>;
 };
 
 &main_gpio1 {
 	status = "okay";
+	pinctrl-names = "default";
+	pinctrl-0 = <&main_gpio1_pins_default>;
+	bootph-all;
+};
+
+&mcu_gpio0 {
+	status = "disabled";
 };
 
 &main_uart0 {
@@ -516,42 +358,8 @@
 	bootph-all;
 };
 
-&main_uart5 {
-	/* MAIN UART 5 is used by System firmware */
-	pinctrl-names = "default";
-	pinctrl-0 = <&main_uart5_pins_default>;
-	status = "reserved";
-};
-
 &mcu_pmx0 {
 
-	mcu_i2c0_pins_default: mcu-i2c0-default-pins {
-		pinctrl-single,pins = <
-			J722S_MCU_IOPAD(0x048, PIN_INPUT, 0) /* (E11) MCU_I2C0_SDA */
-			J722S_MCU_IOPAD(0x044, PIN_INPUT, 0) /* (B13) MCU_I2C0_SCL */
-		>;
-	};
-
-	mcu_mcan0_pins_default: mcu-mcan0-default-pins {
-		pinctrl-single,pins = <
-			J722S_MCU_IOPAD(0x038, PIN_INPUT, 0) /* (D8) MCU_MCAN0_RX */
-			J722S_MCU_IOPAD(0x034, PIN_OUTPUT, 0) /* (B2) MCU_MCAN0_TX */
-		>;
-	};
-
-	mcu_mcan1_pins_default: mcu-mcan1-default-pins {
-		pinctrl-single,pins = <
-			J722S_MCU_IOPAD(0x040, PIN_INPUT, 0) /* (B1) MCU_MCAN1_RX */
-			J722S_MCU_IOPAD(0x03C, PIN_OUTPUT, 0) /*(C1) MCU_MCAN1_TX */
-		>;
-	};
-
-	mcu_mcan0_gpio_pins_default: mcu-mcan0-gpio-default-pins {
-		pinctrl-single,pins = <
-			J722S_MCU_IOPAD(0x0030, PIN_OUTPUT, 7) /* (C3) MCU_GPIO0_12 */
-		>;
-	};
-
 	wkup_uart0_pins_default: wkup-uart0-default-pins {
 		pinctrl-single,pins = <
 			J722S_MCU_IOPAD(0x02c, PIN_INPUT, 0)	/* (C7) WKUP_UART0_CTSn */
@@ -585,93 +393,6 @@
 	clock-frequency = <400000>;
 	status = "okay";
 	bootph-all;
-
-	tps65224: pmic@48 {
-		compatible = "ti,tps65224-q1";
-		reg = <0x48>;
-		pinctrl-names = "default";
-		pinctrl-0 = <&pmic_irq_pins_default>;
-		interrupt-parent = <&main_gpio0>;
-		interrupts = <0 IRQ_TYPE_EDGE_FALLING>;
-		ti,primary-pmic;
-
-		gpio-controller;
-		#gpio-cells = <2>;
-
-		buck12-supply = <&vsys_io_3v3>;
-		buck3-supply = <&vsys_io_3v3>;
-		buck4-supply = <&vsys_io_3v3>;
-
-		ldo1-supply = <&vsys_io_3v3>;
-		ldo2-supply = <&vsys_io_3v3>;
-		ldo3-supply = <&vsys_io_3v3>;
-
-		regulators {
-
-			buck1: buck1 {
-				regulator-name = "vcc1v8_io_buck1";
-				regulator-min-microvolt = <1800000>;
-				regulator-max-microvolt = <1800000>;
-				regulator-boot-on;
-				regulator-always-on;
-				bootph-all;
-			};
-
-			buck2: buck2 {
-				regulator-name = "vcc1v1_ddr_buck2";
-				regulator-min-microvolt = <1100000>;
-				regulator-max-microvolt = <1100000>;
-				regulator-boot-on;
-				regulator-always-on;
-			};
-
-			buck3: buck3 {
-				regulator-name = "vcc0v85_ram_buck3";
-				regulator-min-microvolt = <850000>;
-				regulator-max-microvolt = <850000>;
-				regulator-boot-on;
-				regulator-always-on;
-			};
-
-			buck4: buck4 {
-				regulator-name = "vcc0v75_ioret_buck4";
-				regulator-min-microvolt = <750000>;
-				regulator-max-microvolt = <750000>;
-				regulator-boot-on;
-				regulator-always-on;
-			};
-
-			ldo1: ldo1 {
-				regulator-name = "vdda1v8_pll_ldo1";
-				regulator-min-microvolt = <1800000>;
-				regulator-max-microvolt = <1800000>;
-				regulator-boot-on;
-				regulator-always-on;
-			};
-
-			ldo2: ldo2 {
-				regulator-name = "dvdd3v3_ldo2";
-				regulator-min-microvolt = <3300000>;
-				regulator-max-microvolt = <3300000>;
-				regulator-boot-on;
-				regulator-always-on;
-			};
-
-			ldo3: ldo3 {
-				regulator-name = "vdd1v85_phy_ldo3";
-				regulator-min-microvolt = <1800000>;
-				regulator-max-microvolt = <1800000>;
-				regulator-boot-on;
-				regulator-always-on;
-			};
-	       };
-	};
-};
-
-&k3_clks {
-	/* Configure AUDIO_EXT_REFCLK1 pin as output */
-	pinctrl-names = "default";
-	pinctrl-0 = <&audio_ext_refclk1_pins_default>;
 };
 
 &main_i2c0 {
@@ -680,334 +401,14 @@
 	clock-frequency = <400000>;
 	status = "okay";
 	bootph-all;
-
-	exp1: gpio@23 {
-		compatible = "ti,tca6424";
-		reg = <0x23>;
-		gpio-controller;
-		#gpio-cells = <2>;
-		gpio-line-names = "TRC_MUX_SEL", "OSPI/ONAND_MUX_SEL",
-				  "MCASP1_FET_SEL", "CTRL_PM_I2C_OE#",
-				  "CSI_VIO_SEL", "USB2.0_MUX_SEL",
-				  "CSI01_MUX_SEL_2", "CSI23_MUX_SEL_2",
-				  "LMK1_OE1", "LMK1_OE0",
-				  "LMK2_OE0", "LMK2_OE1",
-				  "GPIO_RGMII1_RST#", "GPIO_AUD_RSTn",
-				  "GPIO_eMMC_RSTn", "GPIO_uSD_PWR_EN",
-				  "USER_LED2", "MCAN0_STB",
-				  "PCIe0_1L_RC_RSTz", "PCIe0_1L_PRSNT#",
-				  "ENET1_EXP_SPARE2", "ENET1_EXP_PWRDN",
-				  "PD_I2ENET1_I2CMUX_SELC_IRQ", "ENET1_EXP_RESETZ";
-		bootph-all;
-
-		p05-hog {
-			/* P05 - USB2.0_MUX_SEL */
-			gpio-hog;
-			gpios = <5 GPIO_ACTIVE_LOW>;
-			output-low;
-		};
-
-		p01_hog: p01-hog {
-			/* P01 - TRC_MUX_SEL */
-			gpio-hog;
-			gpios = <0 GPIO_ACTIVE_HIGH>;
-			output-low;
-			line-name = "TRC_MUX_SEL";
-		};
-
-		p02_hog: p02-hog {
-			/* P02 - MCASP1_FET_SEL */
-			gpio-hog;
-			gpios = <2 GPIO_ACTIVE_HIGH>;
-			output-high;
-			line-name = "MCASP1_FET_SEL";
-		};
-
-		p13_hog: p13-hog {
-			/* P13 - GPIO_AUD_RSTn */
-			gpio-hog;
-			gpios = <13 GPIO_ACTIVE_HIGH>;
-			output-high;
-			line-name = "GPIO_AUD_RSTn";
-		};
-	};
-
-	tlv320aic3106: audio-codec@1b {
-		#sound-dai-cells = <0>;
-		compatible = "ti,tlv320aic3106";
-		reg = <0x1b>;
-		ai3x-micbias-vg = <1>;  /* 2.0V */
-		AVDD-supply = <&vsys_io_3v3>;
-		IOVDD-supply = <&vsys_io_3v3>;
-		DRVDD-supply = <&vsys_io_3v3>;
-		DVDD-supply = <&vsys_io_1v8>;
-	};
-};
-
-&main_i2c1 {
-	status = "okay";
-	pinctrl-names = "default";
-	pinctrl-0 = <&main_i2c1_pins_default>;
-	clock-frequency = <100000>;
-
-	exp2: gpio@20 {
-		compatible = "ti,tca6416";
-		reg = <0x20>;
-		gpio-controller;
-		#gpio-cells = <2>;
-		gpio-line-names = "DSI_Mux_SEL_2", "GPIO_eDP_ENABLE",
-				  "DP0_PWR_SW_EN", "GPIO_OLDI_RSTn",
-				  "GPIO_HDMI_RSTn", "HDMI_LS_OE",
-				  "", "",
-				  "DSI_GPIO0", "DSI_GPIO1",
-				  "DSI_EDID", "IO_eDP_IRQ",
-				  "OLDI_INT#", "HDMI_INTn",
-				  "", "";
-
-		interrupt-parent = <&main_gpio0>;
-		interrupts = <67 IRQ_TYPE_EDGE_FALLING>;
-		interrupt-controller;
-		#interrupt-cells = <2>;
-
-		pinctrl-names = "default";
-		pinctrl-0 = <&main_gpio0_ioexp_intr_pins_default>;
-		bootph-all;
-
-		p04-hog {
-			/* P04 - GPIO_HDMI_RSTn */
-			gpio-hog;
-			gpios = <4 GPIO_ACTIVE_LOW>;
-			output-low;
-			line-name = "GPIO_HDMI_RSTn";
-		};
-
-		p03-hog {
-			/* P03 - GPIO_OLDI_RSTn */
-			gpio-hog;
-			gpios = <3 GPIO_ACTIVE_LOW>;
-			output-low;
-			line-name = "GPIO_OLDI_RSTn";
-		};
-
-		p05-hog {
-			/* P05 - HDMI_LS_OE */
-			gpio-hog;
-			gpios = <5 GPIO_ACTIVE_HIGH>;
-			output-high;
-			line-name = "HDMI_LS_OE";
-		};
-	};
-
-	sii9022: bridge-hdmi@3b {
-		compatible = "sil,sii9022";
-		reg = <0x3b>;
-		interrupt-parent = <&exp2>;
-		interrupts = <13 IRQ_TYPE_EDGE_FALLING>;
-		#sound-dai-cells = <0>;
-		sil,i2s-data-lanes = < 0 >;
-
-		hdmi_tx_ports: ports {
-			#address-cells = <1>;
-			#size-cells = <0>;
-
-			/*
-			 * HDMI can be serviced with 3 potential VPs -
-			 * (DSS0 VP1 / DSS1 VP0 / DSS1 VP1).
-			 * For now, we will service it with DSS1 VP0.
-			 */
-			port@0 {
-				reg = <0>;
-
-				sii9022_in: endpoint {
-					remote-endpoint = <&dss1_dpi0_out>;
-				};
-			};
-
-			port@1 {
-				reg = <1>;
-
-				sii9022_out: endpoint {
-					remote-endpoint = <&hdmi_connector_in>;
-				};
-			};
-		};
-	};
-
-	dsi_edp_bridge: dsi-edp-bridge@2c {
-		compatible = "ti,sn65dsi86";
-		reg = <0x2c>;
-
-		clock-names = "refclk";
-		clocks = <&edp0_refclk>;
-
-		enable-gpios = <&exp2 1 GPIO_ACTIVE_HIGH>;
-
-		vpll-supply = <&vsys_io_1v8>;
-		vccio-supply = <&vsys_io_1v8>;
-		vcca-supply = <&vsys_io_1v2>;
-		vcc-supply = <&vsys_io_1v2>;
-
-		dsi_edp_bridge_ports: ports {
-			#address-cells = <1>;
-			#size-cells = <0>;
-			port@0 {
-				reg = <0>;
-				dp0_in: endpoint {
-					remote-endpoint = <&dsi0_out>;
-				};
-			};
-
-			port@1 {
-				reg = <1>;
-				dp0_out: endpoint {
-					remote-endpoint = <&dp0_connector_in>;
-				};
-			};
-		};
-	};
 };
 
-&main_i2c2 {
-	status = "okay";
+&main_i2c3 {
 	pinctrl-names = "default";
-	pinctrl-0 = <&main_i2c2_pins_default>;
+	pinctrl-0 = <&main_i2c3_pins_default>;
 	clock-frequency = <400000>;
-
-	pca9543_0: i2c-mux@70 {
-		compatible = "nxp,pca9543";
-		#address-cells = <1>;
-		#size-cells = <0>;
-		reg = <0x70>;
-	};
-
-	pca9543_1: i2c-mux@71 {
-		compatible = "nxp,pca9543";
-		#address-cells = <1>;
-		#size-cells = <0>;
-		reg = <0x71>;
-	};
-};
-
-&ospi0 {
-	pinctrl-names = "default";
-	pinctrl-0 = <&ospi0_pins_default>;
 	status = "okay";
-
-	flash@0 {
-		compatible = "jedec,spi-nor";
-		reg = <0x0>;
-		spi-tx-bus-width = <8>;
-		spi-rx-bus-width = <8>;
-		spi-max-frequency = <25000000>;
-		cdns,tshsl-ns = <60>;
-		cdns,tsd2d-ns = <60>;
-		cdns,tchsh-ns = <60>;
-		cdns,tslch-ns = <60>;
-		cdns,read-delay = <4>;
-		cdns,phy-mode;
-		bootph-all;
-
-		partitions {
-			compatible = "fixed-partitions";
-			#address-cells = <1>;
-			#size-cells = <1>;
-
-			partition@0 {
-				label = "ospi.tiboot3";
-				reg = <0x00 0x80000>;
-			};
-
-			partition@80000 {
-				label = "ospi.tispl";
-				reg = <0x80000 0x200000>;
-			};
-
-			partition@280000 {
-				label = "ospi.u-boot";
-				reg = <0x280000 0x400000>;
-			};
-
-			partition@680000 {
-				label = "ospi.env";
-				reg = <0x680000 0x40000>;
-			};
-
-			partition@6c0000 {
-				label = "ospi.env.backup";
-				reg = <0x6c0000 0x40000>;
-			};
-
-			partition@800000 {
-				label = "ospi.rootfs";
-				reg = <0x800000 0x37c0000>;
-			};
-
-			partition@3fc0000 {
-				bootph-all;
-				label = "ospi.phypattern";
-				reg = <0x3fc0000 0x40000>;
-			};
-		};
-	};
-
-	ospi0_nand: nand@0 {
-		compatible = "spi-nand";
-		reg = <0x0>;
-		spi-tx-bus-width = <8>;
-		spi-rx-bus-width = <8>;
-		spi-max-frequency = <25000000>;
-		cdns,tshsl-ns = <60>;
-		cdns,tsd2d-ns = <60>;
-		cdns,tchsh-ns = <60>;
-		cdns,tslch-ns = <60>;
-		cdns,read-delay = <2>;
-		#address-cells = <1>;
-		#size-cells = <1>;
-		bootph-all;
-		cdns,phy-mode;
-
-		partitions {
-			compatible = "fixed-partitions";
-			#address-cells = <1>;
-			#size-cells = <1>;
-
-			partition@0 {
-				label = "ospi_nand.tiboot3";
-				reg = <0x0 0x80000>;
-			};
-
-			partition@80000 {
-				label = "ospi_nand.tispl";
-				reg = <0x80000 0x200000>;
-			};
-
-			partition@280000 {
-				label = "ospi_nand.u-boot";
-				reg = <0x280000 0x400000>;
-			};
-
-			partition@680000 {
-				label = "ospi_nand.env";
-				reg = <0x680000 0x40000>;
-			};
-
-			partition@6c0000 {
-				label = "ospi_nand.env.backup";
-				reg = <0x6c0000 0x40000>;
-			};
-
-			partition@2000000 {
-				label = "ospi_nand.rootfs";
-				reg = <0x2000000 0x5fc0000>;
-			};
-
-			partition@7fc0000 {
-				bootph-all;
-				label = "ospi_nand.phypattern";
-				reg = <0x7fc0000 0x40000>;
-			};
-		};
-	};
+	bootph-all;
 };
 
 &sdhci0 {
@@ -1025,10 +426,39 @@
 	pinctrl-0 = <&main_mmc1_pins_default>;
 	ti,driver-strength-ohm = <50>;
 	disable-wp;
+	no-1-8-v;
 	status = "okay";
 	bootph-all;
 };
 
+&cpsw3g {
+	status = "okay";
+	pinctrl-names = "default";
+	pinctrl-0 = <&rgmii1_pins_default>;
+};
+
+&cpsw3g_mdio {
+	status = "okay";
+	pinctrl-names = "default";
+	pinctrl-0 = <&mdio_pins_default>;
+
+	cpsw3g_phy0: ethernet-phy@0 {
+		reg = <0>;
+		ti,rx-internal-delay = <DP83867_RGMIIDCTL_2_00_NS>;
+		ti,fifo-depth = <DP83867_PHYCR_FIFO_DEPTH_4_B_NIB>;
+		ti,min-output-impedance;
+	};
+};
+
+&cpsw_port1 {
+	phy-mode = "rgmii-rxid";
+	phy-handle = <&cpsw3g_phy0>;
+};
+
+&cpsw_port2 {
+	status = "disabled";
+};
+
 &mailbox0_cluster0 {
 	status = "okay";
 
@@ -1132,10 +562,6 @@
 		      <J722S_SERDES1_LANE0_PCIE0_LANE0>;
 };
 
-&serdes_wiz0 {
-	status = "okay";
-};
-
 &serdes0 {
 	status = "okay";
 	serdes0_usb_link: phy@0 {
@@ -1147,42 +573,16 @@
 	};
 };
 
-&serdes_wiz1 {
-	status = "okay";
-};
-
-&serdes1 {
-	status = "okay";
-	serdes1_pcie_link: phy@0 {
-		reg = <0>;
-		cdns,num-lanes = <1>;
-		#phy-cells = <0>;
-		cdns,phy-type = <PHY_TYPE_PCIE>;
-		resets = <&serdes_wiz1 1>;
-	};
-};
-
-&pcie0_rc {
-	reset-gpios = <&exp1 18 GPIO_ACTIVE_HIGH>;
-	phys = <&serdes1_pcie_link>;
-	phy-names = "pcie-phy";
-	status = "okay";
-};
-
 &usbss0 {
 	ti,vbus-divider;
 	status = "okay";
 };
 
 &usb0 {
-	dr_mode = "otg";
+	dr_mode = "host";
 	usb-role-switch;
 };
 
-&usb0_phy_ctrl {
-	bootph-all;
-};
-
 &usbss1 {
 	pinctrl-names = "default";
 	pinctrl-0 = <&main_usb1_pins_default>;
@@ -1197,143 +597,3 @@
 	phy-names = "cdns3,usb3-phy";
 };
 
-&mcasp1 {
-	status = "okay";
-	#sound-dai-cells = <0>;
-	pinctrl-names = "default";
-	pinctrl-0 = <&main_mcasp1_pins_default>;
-	op-mode = <0>; /* MCASP_IIS_MODE */
-	tdm-slots = <2>;
-	serial-dir = < /* 0: INACTIVE, 1: TX, 2: RX */
-	       1 0 2 0
-	       0 0 0 0
-	       0 0 0 0
-	       0 0 0 0
-	>;
-};
-
-&mcu_mcan0 {
-	pinctrl-names = "default";
-	pinctrl-0 = <&mcu_mcan0_pins_default>;
-	phys = <&transceiver0>;
-	status = "okay";
-};
-
-&mcu_mcan1 {
-	pinctrl-names = "default";
-	pinctrl-0 = <&mcu_mcan1_pins_default>;
-	phys = <&transceiver1>;
-	status = "okay";
-};
-
-&main_mcan0 {
-	pinctrl-names = "default";
-	pinctrl-0 = <&main_mcan0_pins_default>;
-	phys = <&transceiver2>;
-	status = "okay";
-};
-
-&mcu_gpio0 {
-	status = "okay";
-};
-
-&mcu_i2c0 {
-	pinctrl-names = "default";
-	pinctrl-0 = <&mcu_i2c0_pins_default>;
-	clock-frequency = <400000>;
-	status = "okay";
-};
-
-&dphy_tx0 {
-	status = "okay";
-};
-
-&dsi0 {
-	status = "okay";
-
-	ports {
-		#address-cells = <1>;
-		#size-cells = <0>;
-
-		port@0 {
-			reg = <0>;
-
-			dsi0_out: endpoint {
-				remote-endpoint = <&dp0_in>;
-			};
-		};
-
-		port@1 {
-			reg = <1>;
-
-			dsi0_in: endpoint {
-				remote-endpoint = <&dss1_dpi1_out>;
-			};
-		};
-	};
-};
-
-&dss1 {
-	status = "okay";
-	pinctrl-names = "default";
-	pinctrl-0 = <&main_dpi_pins_default>;
-
-	clocks = <&k3_clks 232 8>,
-		 <&k3_clks 232 0>,
-		 <&k3_clks 232 4>;
-
-	assigned-clocks = <&k3_clks 241 0>,	/* DSS1-VP0 */
-			  <&k3_clks 240 0>,	/* DSS1-VP1 */
-			  <&k3_clks 245 0>;	/* DPI Output */
-
-	assigned-clock-parents = <&k3_clks 241 2>,	/* PLL 17 HDMI */
-				 <&k3_clks 240 1>,	/* PLL 18 DSI */
-				 <&k3_clks 245 2>;	/* DSS1-DPI0 */
-};
-
-&dss1_ports {
-	/* DSS1-VP0: DPI/HDMI Output */
-	port@0 {
-		reg = <0>;
-
-		dss1_dpi0_out: endpoint {
-			remote-endpoint = <&sii9022_in>;
-		};
-	};
-
-	/* DSS1-VP1: DSI Output */
-	port@1 {
-		reg = <1>;
-
-		dss1_dpi1_out: endpoint {
-			remote-endpoint = <&dsi0_in>;
-		};
-	};
-};
-
-&mcu_rti0 {
-	assigned-clock-parents = <&k3_clks 131 4>;
-};
-
-&main_rti0 {
-	assigned-clock-parents = <&k3_clks 125 4>;
-};
-
-&main_rti1 {
-	assigned-clock-parents = <&k3_clks 126 4>;
-};
-
-&main_rti2 {
-	assigned-clock-parents = <&k3_clks 127 4>;
-};
-
-&main_rti3 {
-	assigned-clock-parents = <&k3_clks 128 4>;
-};
-
-&timesync_router {
-	mux-reg-masks-state = <
-		K3_TS_OFFSET(12, 0x0001ffff, 17)
-		>;
-	status = "okay";
-};
-- 
2.43.0

